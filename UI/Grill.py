# Grill toast program
# movej([base,shoulder,elbow,wrist1,wrist2,wrist3], a is joint acceleration, v joint velocity, t is time, r is blend radius) in radians
# change from joint position to joint pose i.e x,y,z with movej(p[.....)

#Each s.send is a waypoint
import socket
import time
import sys

HOST = "192.168.0.103" # The remote host
PORT = 30002 # The same port as used by the server

#Flip the sandwich
def flipMotion():
      s.send(b"movej([1.7708683444818067, -1.633851163435109, -1.694508390466396, -3.498378443876027, " +
            b"-1.4127499966032708, 0.08960905186847246], t=4.0)\n")
      time.sleep(4.1)
      s.send(b"movej([1.5200145347853855, -1.7766409967187684, -1.812911925922803, -3.3976649241421377, " +
            b"-1.6551373245800516, -0.0081875678372203], t=1.0)\n")
      time.sleep(1.1)
      s.send(b"movej([1.5898984670639038, -2.0458744207965296, -1.4941838423358362, -3.3674915472613733, " +
            b"-1.5588062445269983, 0.06704088300466537], t=1.0)\n")
      time.sleep(1.1)
      s.send(b"movej([1.5445931117401948, -1.9877265190245978, -1.7603055658110618, -2.827502633245121, " +
              b"-1.563780962657038, -0.020626333518274365], t=1.0)\n")
      time.sleep(1.0)
      s.send(b"movej([1.615455985069275, -1.8939154783831995, -2.14213210741152, -1.9066742102252405, " +
            b"-1.4978745619403284, 3.954794374294579E-4], t=2.0)\n")
      time.sleep(2.1)
      s.send(b"movej([1.61546790599823, -1.6603625456439417, -1.9227336088763636, -1.7480695883380335, " +
            b"-1.4953959623919886, 8.029430755414069E-4], t=1.0)\n")
      time.sleep(1.1)
      s.send(b"movej([1.714249849319458, -1.9193671385394495, -1.730574909840719, -1.0380094687091272, " +
              b"-1.0708583037005823, -1.6973632017718714], t=1.3)\n")
      time.sleep(1.4)
      s.send(b"movej([1.7249850034713745, -1.9206002394305628, -1.8837688604937952, -0.991333309804098, " +
            b"-1.4932649771319788, -3.0518341700183313], t=1.0)\n")
      time.sleep(1.0)
      s.send(b"movej([1.6755198240280151, -1.7474525610553187, -2.0974538961993616, -1.8535931746112269, " +
            b"-1.4033568541156214, -3.145057026539938], t=1.1)\n")
      time.sleep(1.2)
      s.send(b"movej([1.669801937257287, -1.7454374445491254, -1.992464200886463, -2.575965468084575, " +
            b"-1.3978528199829885, -3.1451190747923823], t=1.0)\n")
      time.sleep(1.1)
      s.send(b"movej([1.644454116797123, -1.6363896580902484, -2.103503207574808, -2.614357829083252, " +
            b"-1.4252760733915038, -3.147974516817855], t=0.5)\n")
      time.sleep(0.6)
      s.send(b"movej([1.7033982475304896, -1.512872505744057, -1.9461825269616906, -2.897777558942364, " +
            b"-1.3692764163182662, -3.142745635506468], t=1.0)\n")
      time.sleep(1.1)

#Centering sandwich on the griddle
def centerIt():
      s.send(b"movej([1.7708683444818067, -1.633851163435109, -1.694508390466396, -3.498378443876027, " +
            b"-1.4127499966032708, 0.08960905186847246], t=4.0)\n")
      time.sleep(4.1)
      s.send(b"movej([1.6173386573791504, -1.6567462126361292, -1.8543489615069788, -3.541016403828756, " +
            b"-1.544701878224508, 0.08958395570516586], t=0.6)\n")
      time.sleep(0.7)
      s.send(b"movej([1.6084343252778082, -1.8395915441300144, -1.6343334825985094, -3.5779440057268292, " +
            b"-1.5515307317374365, 0.08312999040883629], t=4.0)\n")
      time.sleep(4.1)
      s.send(b"movej([1.6155039072036743, -1.777961556111471, -1.6061232725726526, -3.7027466932879847, " +
            b"-1.516409699116842, 0.13705609738826752], t=0.6)\n")
      time.sleep(0.7)
      s.send(b"movej([1.6842317859895555, -2.313261123379471, -0.6499215873561033, -1.80373577014905, " + 
            b"0.8817351596644185, 1.7486982361007044], t=4.0)\n")
      time.sleep(4.1)
      s.send(b"movej([1.6839467589810013, -2.2931935562469974, -0.8694992891572717, -1.6057227943038246, " +
            b"0.8821748586160109, 1.7510396921112772], t=0.8)\n")
      time.sleep(0.9)
      s.send(b"movej([1.7134938999343792, -2.292487417934714, -0.861470840133796, -1.638973298644796, " +
            b"0.8841783084279116, 1.7891629668304174], t=4.0)\n")
      time.sleep(4.1)
      s.send(b"movej([1.7137376196671268, -2.3042890812618317, -0.7007587128845643, -1.7867304861246396, " +
            b"0.8838281517828301, 1.7873660421819437], t=0.7)\n")
      time.sleep(0.8)
      s.send(b"movej([1.6006797552108765, -2.070245091115133, -0.7604110876666468, -1.5182479063617151, " + 
            b"1.5861799716949463, 0.11639416962862015], t=2.3)\n")
      time.sleep(2.4)
      s.send(b"movej([1.531215073597356, -2.2794507840190494, -0.7431855092787512, -1.6806811936546246, " +
            b"2.2498896484060396, -1.5735034079784667], t=2.4)\n")
      time.sleep(2.5)
      s.send(b"movej([1.5309836461390152, -2.2712405125594355, -0.9078857483329479, -1.5230391690016916, " +
            b"2.2500805008424276, -1.5716586877214134], t=0.7)\n")
      time.sleep(0.8)
      s.send(b"movej([1.4605849774807904, -2.307924539599, -0.8423433747292108, -1.6082178425987301, " +
            b"2.2489101660825632, -1.6625109746335287], t=4.0)\n")
      time.sleep(4.1)
      s.send(b"movej([1.4607340860977254, -2.313853020192788, -0.7328937766459207, -1.712495691893242,  " +
            b"2.248728280967434, -1.6637246251623186], t=0.5)\n")
      time.sleep(0.6)
      s.send(b"movej([1.604134202003479, -2.020341221486227, -0.7518551985370081, -1.957228962575094, " +
            b"1.5903666019439697, -2.9874466101275843], t=2.0)\n")
      time.sleep(2.1)

#Moving the sandwich onto the griddle
def toGrill() :
      s.send(b"movej([0.578, -2.041, -1.348, -3.959, -2.235, -0.653], t=4.0)\n")
      time.sleep(4.1)
      s.send(b"movej([0.556, -2.056, -1.666, -3.379, -2.302, -0.641], t=1.4)\n")
      time.sleep(1.5)
      s.send(b"movej([0.610, -2.077, -1.641, -3.340, -2.263, -0.600], t=0.4)\n")
      time.sleep(0.5)
      s.send(b"movej([0.616, -2.041, -1.641, -3.357, -2.263, -0.600], t=0.3)\n")
      time.sleep(0.4)
      s.send(b"movej([0.700, -2.090, -1.575, -3.395, -2.172, -0.460], t=0.6)\n")
      time.sleep(0.7)
      s.send(b"movej([0.781, -2.126, -1.480, -3.460, -2.079, -0.462], t=0.6)\n")
      time.sleep(0.7)
      s.send(b"movej([0.754, -2.068, -1.515, -3.471, -2.089, -0.500], t=0.4)\n")
      time.sleep(0.5)
      s.send(b"movej([0.771, -2.000, -1.348, -3.700, -2.094, -0.504], t=0.9)\n")
      time.sleep(1.0)
      s.send(b"movej([1.768, -1.631, -2.158, -1.886, -1.417, 0.089], t=2.5)\n")
      time.sleep(2.6)
      s.send(b"movej([1.698, -1.718, -1.717, -3.369, -1.395, 0.089], t=1.4)\n")
      time.sleep(1.5)
      s.send(b"movej([1.641, -2.134, -1.095, -4.006, -1.451, 0.082], t=1.8)\n")
      time.sleep(1.9)
      s.send(b"movej([1.641, -2.142, -1.081, -4.125, -1.460, 0.109], t=0.6)\n")
      time.sleep(0.7)
      s.send(b"movej([1.668, -1.798, -1.635, -3.827, -1.434, 0.107], t=7.0)\n")
      time.sleep(7.1)
      s.send(b"movej([1.668, -1.551, -1.630, -4.151, -1.434, 0.106], t=1.0)\n")
      time.sleep(1.1)

#Move sandwich out of griddle
def offGrill() :
      s.send(b"movej([1.7708683444818067, -1.633851163435109, -1.694508390466396, -3.498378443876027, " +
            b"-1.4127499966032708, 0.08960905186847246], t=4.0)\n")
      time.sleep(4.1)
      s.send(b"movej([1.5697511827555894, -1.76309865437565, -1.8293898422928336, -3.393125987582662, " +
            b"-1.6171828060832496, 0.024053408432931356], t=0.8)\n")
      time.sleep(0.9)
      s.send(b"movej([1.6016718558616525, -2.051694190320326, -1.4861723479324578, -3.359402106783701," +
            b"-1.495819502713628, -3.81396104994991E-4], t=1.0)\n")
      time.sleep(1.1)
      s.send(b"movej([1.6163551807403564, -1.972938362752096, -1.7829893271075647, -2.8211491743670862, " +
            b"-1.4950006643878382, 9.58738019107841E-5], t=1.0)\n")
      time.sleep(1.1)
      s.send(b"movej([1.615455985069275, -1.8939154783831995, -2.14213210741152, -1.9066742102252405, " +
            b"-1.4978745619403284, 3.954794374294579E-4], t=2.0)\n")
      time.sleep(2.1)
      s.send(b"movej([1.0606755018234253, -2.1703317801104944, -1.0463584105121058, -3.6301830450641077, " +
            b"-1.793253246937887, -0.20118219057192022], t=1.7)\n")
      time.sleep(1.8)
      s.send(b"movej([1.061094880104065, -2.281864945088522, -0.5963061491595667, -4.289954368268148, " +
            b"-1.6779635588275355, -0.4587314764605921], t=1.0)\n")
      time.sleep(1.1)


s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect((HOST, PORT))
time.sleep(1)

# Assuming tool is on the mount, set voltage to 12 to hold the tool.
# DO NOT SET IT TO 24
s.send(b"set_tool_voltage(12)\n")
time.sleep(1)
#Initial position
s.send(b"movej([1.5, -1.5, -1.5, -1.5, -1.0, -1.5], t=3.0)\n")
time.sleep(3.5)

count = 0

while (True):
      print ("Calling toGrill")
      toGrill()
      print ("Calling centerIt")
      centerIt()
      print ("Wait")
      time.sleep(5)
      print ("Calling flipMotion")
      flipMotion()
      print ("Calling centerIt")
      centerIt()
      print("Wait")
      time.sleep(5)
      print ("Calling offGrill")
      offGrill()
      time.sleep(5)

      count = count + 1

print ("The count is: ", count)
print ("Program finish")
s.close()
sys.exit()

#---------------------------------------------------------------------------------------------------

